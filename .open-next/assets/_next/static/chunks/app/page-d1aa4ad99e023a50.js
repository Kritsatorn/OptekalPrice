(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4359:(e,t,r)=>{Promise.resolve().then(r.bind(r,8709))},8709:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(5155),s=r(2115);let l=["NF","RF","CF","EARF","Marvel"];function n(e){let{value:t,onChange:r,errors:s,disabled:l}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"card-input",className:"block text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Card List"}),(0,a.jsx)("textarea",{id:"card-input",value:t,onChange:e=>r(e.target.value),disabled:l,rows:8,className:"w-full rounded-card bg-input-bg border border-input-border px-4 py-3 text-t-strong placeholder-t-muted focus:border-[var(--input-focus-ring)] focus:ring-2 focus:ring-[var(--input-focus-ring)]/20 focus:outline-none font-mono text-[13px] disabled:opacity-50 transition-all",placeholder:"Enter cards, one per line:\nTake the Bait Red NF 3\nSink Below Red RF\nCommand and Conquer CF 2\nArt of War EARF\nSpindle Marvel 1"}),(0,a.jsx)("p",{className:"text-kicker text-t-muted",children:"Format: Card Name [Color] FOIL_TYPE [QUANTITY] — Foil types: NF, RF, CF, EARF, Marvel"}),s.length>0&&(0,a.jsx)("div",{className:"space-y-1 rounded-card bg-[var(--accent-danger)]/5 border border-[var(--accent-danger)]/15 p-3",children:s.map((e,t)=>(0,a.jsxs)("p",{className:"text-[13px] text-[var(--accent-danger)]",children:[(0,a.jsxs)("span",{className:"font-mono",children:['"',e.line,'"']})," — ",e.message]},t))})]})}function i(e){let{value:t,onChange:r}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"buyer-name",className:"block text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Buyer Name"}),(0,a.jsx)("input",{id:"buyer-name",type:"text",value:t,onChange:e=>r(e.target.value),className:"w-full rounded-card bg-input-bg border border-input-border px-4 py-2.5 text-t-strong placeholder-t-muted focus:border-[var(--input-focus-ring)] focus:ring-2 focus:ring-[var(--input-focus-ring)]/20 focus:outline-none text-[13px] transition-all",placeholder:"Enter buyer name for CSV export"})]})}let c={NF:{base:"bg-[#E4E6EB] text-[#586060] dark:bg-white/10 dark:text-white/60",glow:""},RF:{base:"bg-gradient-to-r from-rose-400 via-amber-400 to-sky-400 text-white",glow:"glow-rf"},CF:{base:"bg-gradient-to-r from-cyan-400 to-blue-500 text-white",glow:"glow-cf"},EARF:{base:"bg-gradient-to-r from-rose-400 via-amber-300 to-sky-400 text-white ring-2 ring-amber-300/60",glow:"glow-earf"},Marvel:{base:"bg-gradient-to-r from-violet-500 to-purple-600 text-white",glow:"glow-marvel"}};function d(e){var t;let{result:r}=e,s=!!r.error,l=r.price?r.price*r.quantity:null,n=c[r.foilType];return(0,a.jsxs)("div",{className:"\n        glass-card shimmer-border group relative flex gap-4 rounded-card p-card-p\n        bg-card shadow-card hover:shadow-card-hover hover:-translate-y-0.5\n        transition-all duration-200\n        ".concat(s?"border-[var(--accent-danger)]/20":"","\n      "),children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-[88px] h-[120px] rounded-[10px] overflow-hidden bg-muted-surface dark:bg-white/5",children:r.imageUrl?(0,a.jsx)("img",{src:r.imageUrl,alt:r.cardName,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-t-muted text-kicker text-center p-2",children:"No image"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h3",{className:"text-title-sm font-semibold text-t-strong truncate",children:r.cardName}),r.setCode&&(0,a.jsx)("p",{className:"text-kicker text-t-muted mt-0.5",children:r.setCode})]}),(0,a.jsx)("span",{className:"\n                inline-flex items-center px-2.5 py-1 rounded-full\n                text-[11px] font-bold tracking-wide flex-shrink-0\n                ".concat(n.base," ").concat(n.glow,"\n              "),children:r.foilType})]})}),s?(0,a.jsx)("p",{className:"text-[13px] text-[var(--accent-danger)] mt-2",children:r.error}):(0,a.jsxs)("div",{className:"mt-auto pt-2",children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsxs)("span",{className:"text-metric-sm font-semibold text-t-strong",children:["\xa5",null==(t=r.price)?void 0:t.toLocaleString()]}),(0,a.jsx)("span",{className:"text-kicker text-t-muted font-medium",children:"NM"}),!r.available&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-kicker font-medium text-[var(--accent-danger)]",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent-danger)] inline-block"}),"Out of stock"]}),r.available&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-kicker font-medium text-[var(--accent-success)]",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent-success)] inline-block"}),"In stock"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1.5 text-[13px] text-t-muted",children:[(0,a.jsxs)("span",{children:["Qty: ",r.quantity]}),null!==l&&(0,a.jsxs)("span",{className:"font-semibold text-t-strong",children:["\xa5",l.toLocaleString()]})]})]}),r.productUrl&&(0,a.jsxs)("a",{href:r.productUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 mt-2 text-kicker font-medium text-[var(--primary-400)] hover:text-[var(--primary-500)] dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:["View on Girafull",(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})}let o={NF:{base:"bg-[#E4E6EB] text-[#586060] dark:bg-white/10 dark:text-white/60",glow:""},RF:{base:"bg-gradient-to-r from-rose-400 via-amber-400 to-sky-400 text-white",glow:"glow-rf"},CF:{base:"bg-gradient-to-r from-cyan-400 to-blue-500 text-white",glow:"glow-cf"},EARF:{base:"bg-gradient-to-r from-rose-400 via-amber-300 to-sky-400 text-white ring-2 ring-amber-300/60",glow:"glow-earf"},Marvel:{base:"bg-gradient-to-r from-violet-500 to-purple-600 text-white",glow:"glow-marvel"}};function m(e){let{results:t}=e,r=t.filter(e=>!e.error&&null!==e.price),s=t.filter(e=>e.error),l=r.reduce((e,t)=>e+t.price*t.quantity,0);return 0===t.length?null:(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsx)("h2",{className:"text-title-md font-semibold text-t-strong",children:"Summary"}),(0,a.jsx)("div",{className:"glass-card rounded-card bg-card shadow-card overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-[13px] text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-divider",children:[(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Card Name"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Foil"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider text-right",children:"Qty"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider text-right",children:"Price"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider text-right",children:"Subtotal"})]})}),(0,a.jsx)("tbody",{children:r.map((e,t)=>{let r=o[e.foilType];return(0,a.jsxs)("tr",{className:"border-b border-divider last:border-b-0 hover:bg-white/[0.02] transition-colors",children:[(0,a.jsx)("td",{className:"px-5 py-3.5 text-t-strong font-medium",children:e.cardName}),(0,a.jsx)("td",{className:"px-5 py-3.5",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-bold tracking-wide ".concat(r.base," ").concat(r.glow),children:e.foilType})}),(0,a.jsx)("td",{className:"px-5 py-3.5 text-right text-t-body",children:e.quantity}),(0,a.jsxs)("td",{className:"px-5 py-3.5 text-right text-t-body",children:["\xa5",e.price.toLocaleString()]}),(0,a.jsxs)("td",{className:"px-5 py-3.5 text-right text-t-strong font-semibold",children:["\xa5",(e.price*e.quantity).toLocaleString()]})]},t)})}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{className:"border-t border-divider dark:bg-white/[0.02] bg-muted-surface/30",children:[(0,a.jsx)("td",{colSpan:4,className:"px-5 py-4 text-right font-semibold text-t-strong text-title-sm",children:"Grand Total"}),(0,a.jsxs)("td",{className:"px-5 py-4 text-right font-bold text-metric-sm text-[var(--accent-success)]",children:["\xa5",l.toLocaleString()]})]})})]})})}),s.length>0&&(0,a.jsxs)("div",{className:"glass-card rounded-card bg-card shadow-card p-card-p space-y-2",children:[(0,a.jsxs)("h3",{className:"text-title-sm font-semibold text-[var(--accent-danger)]",children:["Not Found (",s.length,")"]}),s.map((e,t)=>(0,a.jsxs)("p",{className:"text-[13px] text-t-muted",children:[e.cardName," (",e.foilType,") — ",e.error]},t))]})]})}function u(e){let{results:t,buyerName:r}=e;return 0===t.filter(e=>!e.error&&null!==e.price).length?null:(0,a.jsxs)("button",{onClick:()=>{!function(e,t){let r=new Date().toISOString().split("T")[0],a="".concat(t||"cardcrew","_").concat(r,".csv"),s=new Blob([e],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(s),n=document.createElement("a");n.href=l,n.download=a,n.click(),URL.revokeObjectURL(l)}(function(e,t){let r=new Date().toISOString().split("T")[0],a=[];a.push("Buyer: ".concat(t)),a.push("Date: ".concat(r)),a.push(""),a.push("Card Name,Foil Type,Quantity,Price per Unit (JPY),Subtotal (JPY)");let s=0;for(let t of e){if(t.error||null===t.price)continue;let e=t.price*t.quantity;s+=e;let r='"'.concat(t.cardName.replace(/"/g,'""'),'"');a.push("".concat(r,',"').concat(t.foilType,'",').concat(t.quantity,",").concat(t.price,",").concat(e))}return a.push(""),a.push(',,,,"Grand Total: \xa5'.concat(s.toLocaleString(),'"')),"\uFEFF"+a.join("\n")}(t,r),r)},className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-400 hover:to-indigo-500 text-white text-[13px] font-semibold shadow-button hover:shadow-lg transition-all active:translate-y-px",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})}function x(e){let{enabled:t,onChange:r}=e;return(0,a.jsxs)("button",{type:"button",onClick:()=>r(!t),className:"inline-flex items-center gap-2 group","aria-pressed":t,children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-t-muted group-hover:text-t-body transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),(0,a.jsx)("span",{className:"text-[12px] font-medium text-t-muted select-none",children:"EN/JP"}),(0,a.jsx)("div",{className:"\n          relative w-9 h-5 rounded-full transition-colors duration-200\n          ".concat(t?"bg-[var(--accent-success)]":"bg-muted-surface","\n        "),children:(0,a.jsx)("div",{className:"\n            absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm\n            transition-transform duration-200\n            ".concat(t?"translate-x-[18px]":"translate-x-0.5","\n          ")})})]})}let h={NF:"bg-[#E4E6EB] text-[#586060] dark:bg-white/10 dark:text-white/60",RF:"bg-gradient-to-r from-rose-400 via-amber-400 to-sky-400 text-white",CF:"bg-gradient-to-r from-cyan-400 to-blue-500 text-white",EARF:"bg-gradient-to-r from-rose-400 via-amber-300 to-sky-400 text-white",Marvel:"bg-gradient-to-r from-violet-500 to-purple-600 text-white"};function p(e){let{lang:t,result:r,isSelected:s,isDisabled:l,onClick:n}=e,i=r&&!r.error;return(0,a.jsxs)("button",{type:"button",onClick:n,disabled:l,className:"\n        flex-1 rounded-card p-3 border-2 transition-all duration-200 text-left\n        ".concat(s?"border-[var(--accent-success)] bg-[var(--accent-success)]/5 shadow-md":i?"border-divider hover:border-t-muted bg-card":"border-divider bg-muted-surface opacity-50 cursor-not-allowed","\n      "),children:[(0,a.jsx)("span",{className:"\n          inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-bold tracking-wide mb-2\n          ".concat("EN"===t?"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300":"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300","\n        "),children:t}),i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-full aspect-[3/4] rounded-[8px] overflow-hidden bg-muted-surface dark:bg-white/5 mb-2",children:r.imageUrl?(0,a.jsx)("img",{src:r.imageUrl,alt:"".concat(r.cardName," (").concat(t,")"),className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-t-muted text-kicker",children:"No image"})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-1.5",children:[(0,a.jsx)("span",{className:"text-[15px] font-semibold text-t-strong",children:null!==r.price?"\xa5".concat(r.price.toLocaleString()):"—"}),(0,a.jsx)("span",{className:"text-kicker text-t-muted",children:"NM"})]}),r.available?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-kicker font-medium text-[var(--accent-success)]",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent-success)] inline-block"}),"In stock"]}):(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-kicker font-medium text-[var(--accent-danger)]",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent-danger)] inline-block"}),"Out of stock"]})]}),r.productUrl&&(0,a.jsxs)("a",{href:r.productUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"inline-flex items-center gap-1 mt-2 text-kicker font-medium text-[var(--primary-400)] hover:text-[var(--primary-500)] dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:["View on Girafull",(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]}):(0,a.jsx)("div",{className:"w-full aspect-[3/4] rounded-[8px] bg-muted-surface dark:bg-white/5 flex items-center justify-center mb-2",children:(0,a.jsx)("span",{className:"text-[13px] text-t-muted",children:"Not Found"})}),s&&(0,a.jsxs)("div",{className:"mt-2 flex items-center justify-center gap-1 text-[12px] font-semibold text-[var(--accent-success)]",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Selected"]})]})}function g(e){let{cardName:t,foilType:r,quantity:s,en:l,jp:n,selected:i,onSelect:c}=e,d=h[r];return(0,a.jsxs)("div",{className:"glass-card shimmer-border rounded-card bg-card shadow-card p-card-p",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h3",{className:"text-title-sm font-semibold text-t-strong truncate",children:t}),(0,a.jsxs)("span",{className:"text-kicker text-t-muted",children:["Qty: ",s]})]}),(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-[11px] font-bold tracking-wide flex-shrink-0 ".concat(d),children:r})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)(p,{lang:"EN",result:l,isSelected:"EN"===i,isDisabled:!l||!!l.error,onClick:()=>c("EN")}),(0,a.jsx)(p,{lang:"JP",result:n,isSelected:"JP"===i,isDisabled:!n||!!n.error,onClick:()=>c("JP")})]})]})}function f(e){let{dualResults:t,selections:r,onSelect:s,onConfirm:l}=e,n=t.every((e,t)=>r.has(t)),i=r.size,c=t.length;return(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-title-md font-semibold text-t-strong",children:"Choose Language Version"}),(0,a.jsxs)("p",{className:"text-[13px] text-t-muted mt-0.5",children:[i,"/",c," selected — pick EN or JP for each card"]})]})}),(0,a.jsx)("div",{className:"grid gap-4 md:gap-[18px] lg:gap-grid-gap grid-cols-1 md:grid-cols-2",children:t.map((e,t)=>(0,a.jsx)(g,{cardName:e.cardName,foilType:e.foilType,quantity:e.quantity,en:e.en,jp:e.jp,selected:r.get(t),onSelect:e=>s(t,e)},t))}),(0,a.jsx)("div",{className:"flex justify-center pt-2",children:(0,a.jsxs)("button",{onClick:l,disabled:!n,className:"px-8 py-3 rounded-full bg-[var(--accent-success)] hover:brightness-110 disabled:bg-muted-surface disabled:text-t-muted text-white text-[14px] font-semibold shadow-button hover:shadow-lg transition-all active:translate-y-px disabled:shadow-none disabled:hover:brightness-100",children:["Confirm Selections (",i,"/",c,")"]})})]})}function b(){let{input:e,setInput:t,buyerName:r,setBuyerName:c,results:o,parseErrors:h,isSearching:p,progress:g,search:b,clearResults:v,dualLang:j,setDualLang:N,dualResults:k,selections:w,selectLanguage:y,confirmSelections:C,isPickerMode:S}=function(){let[e,t]=(0,s.useState)(""),[r,a]=(0,s.useState)(""),[n,i]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[o,m]=(0,s.useState)(!1),[u,x]=(0,s.useState)({current:0,total:0}),[h,p]=(0,s.useState)(!1),[g,f]=(0,s.useState)([]),[b,v]=(0,s.useState)(new Map),[j,N]=(0,s.useState)(!1);(0,s.useEffect)(()=>{try{let e=localStorage.getItem("cardcrew-dual-lang");"true"===e&&p(!0)}catch(e){}},[]);let k=(0,s.useCallback)(e=>{p(e);try{localStorage.setItem("cardcrew-dual-lang",String(e))}catch(e){}},[]),w=h&&g.length>0&&!j,y=(0,s.useCallback)((e,t)=>{v(r=>{let a=new Map(r);return a.set(e,t),a})},[]),C=(0,s.useCallback)(()=>{i(g.map((e,t)=>{let r="JP"===b.get(t)?e.jp:e.en;return r||{cardName:e.cardName,foilType:e.foilType,quantity:e.quantity,productTitle:"",price:null,imageUrl:null,available:!1,productUrl:"",setCode:null,error:"No version selected or found"}})),N(!0)},[g,b]),S=(0,s.useCallback)(async()=>{let t=function(e){let t=[],r=[];for(let a of e.split("\n").map(e=>e.trim()).filter(e=>e.length>0)){let e=a.split(/\s+/);if(e.length<2){r.push({line:a,message:"Need at least a card name and foil type"});continue}let s=1,n=e.length-1,i=e[n];if(/^\d+$/.test(i)&&(s=parseInt(i,10),n--),n<1){r.push({line:a,message:"Need at least a card name and foil type"});continue}let c=e[n].toUpperCase(),d=l.find(e=>e===c);if(!d){r.push({line:a,message:'Invalid foil type "'.concat(e[n],'". Use: NF, RF, CF, EARF, Marvel')});continue}let o=e.slice(0,n).join(" ");if(!o){r.push({line:a,message:"Card name is empty"});continue}t.push({cardName:o,foilType:d,quantity:s,rawLine:a})}return{cards:t,errors:r}}(e);if(d(t.errors),0!==t.cards.length){m(!0),i([]),f([]),v(new Map),N(!1),x({current:0,total:t.cards.length});try{let e=await fetch("/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cards:t.cards,dualLang:h})});if(!e.ok){let t=await e.json();throw Error(t.error||"Search failed")}let r=await e.json();if(h){let e=r.results;f(e);let t=new Map;e.forEach((e,r)=>{e.en&&!e.jp?t.set(r,"EN"):!e.en&&e.jp&&t.set(r,"JP")}),v(t)}else i(r.results);x({current:t.cards.length,total:t.cards.length})}catch(e){console.error("Search error:",e),i(t.cards.map(t=>({cardName:t.cardName,foilType:t.foilType,quantity:t.quantity,productTitle:"",price:null,imageUrl:null,available:!1,productUrl:"",setCode:null,error:e instanceof Error?e.message:"Search failed"})))}finally{m(!1)}}},[e,h]);return{input:e,setInput:t,buyerName:r,setBuyerName:a,results:n,parseErrors:c,isSearching:o,progress:u,search:S,clearResults:(0,s.useCallback)(()=>{i([]),f([]),v(new Map),N(!1),d([]),x({current:0,total:0})},[]),dualLang:h,setDualLang:k,dualResults:g,selections:b,selectLanguage:y,confirmSelections:C,isPickerMode:w}}(),{theme:F,toggle:E,mounted:L}=function(){let[e,t]=(0,s.useState)("dark"),[r,a]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=localStorage.getItem("cardcrew-theme")||"dark";t(e),document.documentElement.classList.toggle("dark","dark"===e),a(!0)},[]);let l=(0,s.useCallback)(e=>{t(e),localStorage.setItem("cardcrew-theme",e),document.documentElement.classList.toggle("dark","dark"===e)},[]),n=(0,s.useCallback)(()=>{l("dark"===e?"light":"dark")},[e,l]);return{theme:e,toggle:n,mounted:r}}();return(0,a.jsx)("div",{className:"min-h-screen bg-page p-4 sm:p-6 md:p-8 lg:p-10",children:(0,a.jsxs)("div",{className:"max-w-[1120px] mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6 md:mb-8 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-[28px] font-bold text-t-strong tracking-tight",children:"CardCrew"}),(0,a.jsx)("p",{className:"text-[13px] text-t-muted mt-1",children:"Search Flesh and Blood cards on Girafull"})]}),L&&(0,a.jsx)("button",{onClick:E,className:"glass-card p-2.5 rounded-full shadow-card hover:shadow-card-hover transition-all","aria-label":"Toggle theme",children:"dark"===F?(0,a.jsx)("svg",{className:"w-5 h-5 text-amber-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):(0,a.jsx)("svg",{className:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})]}),(0,a.jsxs)("div",{className:"glass-panel rounded-panel bg-panel p-4 sm:p-5 md:p-6 lg:p-7",children:[(0,a.jsxs)("div",{className:"glass-card shimmer-border rounded-card bg-card shadow-card p-card-p space-y-4 mb-5",children:[(0,a.jsx)(i,{value:r,onChange:c}),(0,a.jsx)(n,{value:e,onChange:t,errors:h,disabled:p}),(0,a.jsxs)("div",{className:"flex items-center gap-3 pt-1",children:[(0,a.jsx)("button",{onClick:b,disabled:p||!e.trim(),className:"px-6 py-2.5 rounded-full bg-[var(--accent-success)] hover:brightness-110 disabled:bg-muted-surface disabled:text-t-muted text-white text-[13px] font-semibold shadow-button hover:shadow-lg transition-all active:translate-y-px disabled:shadow-none disabled:hover:brightness-100",children:p?"Searching...":"Search"}),(o.length>0||k.length>0)&&(0,a.jsx)("button",{onClick:v,className:"px-4 py-2.5 rounded-full border border-divider text-t-muted hover:text-t-strong hover:border-t-muted text-[13px] font-medium transition-all",children:"Clear"}),(0,a.jsx)("div",{className:"ml-auto",children:(0,a.jsx)(x,{enabled:j,onChange:N})})]})]}),p&&(0,a.jsxs)("div",{className:"glass-card rounded-card bg-card shadow-card p-card-p mb-5 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-[var(--primary-400)] border-t-transparent rounded-full animate-spin"}),(0,a.jsxs)("span",{className:"text-[13px] text-t-body",children:["Searching cards... ",g.current,"/",g.total]})]}),(0,a.jsx)("div",{className:"w-full bg-muted-surface rounded-full h-1.5 overflow-hidden",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 h-1.5 rounded-full transition-all duration-300",style:{width:g.total>0?"".concat(g.current/g.total*100,"%"):"0%"}})})]}),S&&(0,a.jsx)(f,{dualResults:k,selections:w,onSelect:y,onConfirm:C}),!S&&o.length>0&&(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-title-md font-semibold text-t-strong",children:"Results"}),(0,a.jsx)("div",{className:"grid gap-4 md:gap-[18px] lg:gap-grid-gap grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:o.map((e,t)=>(0,a.jsx)(d,{result:e},t))})]}),(0,a.jsx)(m,{results:o}),(0,a.jsx)("div",{className:"flex justify-end pt-1",children:(0,a.jsx)(u,{results:o,buyerName:r})})]})]})]})})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=4359)),_N_E=e.O()}]);
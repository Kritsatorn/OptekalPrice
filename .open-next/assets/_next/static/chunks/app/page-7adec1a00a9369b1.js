(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4359:(e,t,r)=>{Promise.resolve().then(r.bind(r,5319))},5319:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ee});var a=r(5155),s=r(2115);let l=["NF","RF","CF","EARF","Marvel"];function n(e,t,r,a){return"".concat(e?"[".concat(e,"] "):"").concat(t," ").concat(r," ").concat(a)}function i(e,t,r){let a=e.split("\n"),s=a.findIndex(e=>e.trim()===t.trim());return s>=0&&(a[s]=r),a.join("\n")}let c=null;async function d(){if(c)return c;let e=await fetch("/data/cards.json");if(!e.ok)throw Error("Failed to load card database");return c=(await e.json()).map(e=>({name:e.n,cardIdentifier:e.id,defaultImage:e.img,sets:e.sets,pitch:e.p,types:e.t,classes:e.c,printings:e.pr.map(e=>({set:e.s,image:e.img,identifier:e.id,edition:e.e,foiling:e.f,treatment:e.a}))}))}function o(e){return"".concat("https://d2wlb52bya4y8z.cloudfront.net/media/cards/large","/").concat(e,".webp")}let u={1:"Red",2:"Yellow",3:"Blue"};function x(e){let t=void 0!==e.pitch?u[e.pitch]:void 0;return t?"".concat(e.name," ").concat(t):e.name}function m(e){let{value:t,onChange:r,errors:s,disabled:l}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"card-input",className:"block text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Card List"}),(0,a.jsx)("textarea",{id:"card-input",value:t,onChange:e=>r(e.target.value),disabled:l,rows:8,className:"w-full rounded-card bg-input-bg border border-input-border px-4 py-3 text-t-strong placeholder-t-muted focus:border-[var(--input-focus-ring)] focus:ring-2 focus:ring-[var(--input-focus-ring)]/20 focus:outline-none font-mono text-[13px] disabled:opacity-50 transition-all",placeholder:"Enter cards, one per line:\nTake the Bait Red NF 3\nSink Below Red RF\nCommand and Conquer CF 2\nArt of War EARF\nSpindle Marvel 1"}),(0,a.jsx)("p",{className:"text-kicker text-t-muted",children:"Format: Card Name [Color] FOIL_TYPE [QUANTITY] — Foil types: NF, RF, CF, EARF, Marvel"}),s.length>0&&(0,a.jsx)("div",{className:"space-y-1 rounded-card bg-[var(--accent-danger)]/5 border border-[var(--accent-danger)]/15 p-3",children:s.map((e,t)=>(0,a.jsxs)("p",{className:"text-[13px] text-[var(--accent-danger)]",children:[(0,a.jsxs)("span",{className:"font-mono",children:['"',e.line,'"']})," — ",e.message]},t))})]})}function p(e){let{value:t,onChange:r}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"buyer-name",className:"block text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Buyer Name"}),(0,a.jsx)("input",{id:"buyer-name",type:"text",value:t,onChange:e=>r(e.target.value),className:"w-full rounded-card bg-input-bg border border-input-border px-4 py-2.5 text-t-strong placeholder-t-muted focus:border-[var(--input-focus-ring)] focus:ring-2 focus:ring-[var(--input-focus-ring)]/20 focus:outline-none text-[13px] transition-all",placeholder:"Enter buyer name for CSV export"})]})}let h={NF:{base:"bg-[#E4E6EB] text-[#586060] dark:bg-white/10 dark:text-white/60",glow:""},RF:{base:"bg-gradient-to-r from-rose-400 via-amber-400 to-sky-400 text-white",glow:"glow-rf"},CF:{base:"bg-gradient-to-r from-cyan-400 to-blue-500 text-white",glow:"glow-cf"},EARF:{base:"bg-gradient-to-r from-rose-400 via-amber-300 to-sky-400 text-white ring-2 ring-amber-300/60",glow:"glow-earf"},Marvel:{base:"bg-gradient-to-r from-violet-500 to-purple-600 text-white",glow:"glow-marvel"}};function g(e){var t;let{result:r}=e,s=!!r.error,l=r.price?r.price*r.quantity:null,n=h[r.foilType];return(0,a.jsxs)("div",{className:"\n        glass-card shimmer-border group relative flex gap-4 rounded-card p-card-p\n        bg-card shadow-card hover:shadow-card-hover hover:-translate-y-0.5\n        transition-all duration-200\n        ".concat(s?"border-[var(--accent-danger)]/20":"","\n      "),children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-[88px] h-[120px] rounded-[10px] overflow-hidden bg-muted-surface dark:bg-white/5",children:r.imageUrl?(0,a.jsx)("img",{src:r.imageUrl,alt:r.cardName,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-t-muted text-kicker text-center p-2",children:"No image"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h3",{className:"text-title-sm font-semibold text-t-strong truncate",children:r.cardName}),r.setCode&&(0,a.jsx)("p",{className:"text-kicker text-t-muted mt-0.5",children:r.setCode})]}),(0,a.jsx)("span",{className:"\n                inline-flex items-center px-2.5 py-1 rounded-full\n                text-[11px] font-bold tracking-wide flex-shrink-0\n                ".concat(n.base," ").concat(n.glow,"\n              "),children:r.foilType})]})}),s?(0,a.jsx)("p",{className:"text-[13px] text-[var(--accent-danger)] mt-2",children:r.error}):(0,a.jsxs)("div",{className:"mt-auto pt-2",children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsxs)("span",{className:"text-metric-sm font-semibold text-t-strong",children:["\xa5",null==(t=r.price)?void 0:t.toLocaleString()]}),(0,a.jsx)("span",{className:"text-kicker text-t-muted font-medium",children:"NM"}),!r.available&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-kicker font-medium text-[var(--accent-danger)]",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent-danger)] inline-block"}),"Out of stock"]}),r.available&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-kicker font-medium text-[var(--accent-success)]",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent-success)] inline-block"}),"In stock"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1.5 text-[13px] text-t-muted",children:[(0,a.jsxs)("span",{children:["Qty: ",r.quantity]}),null!==l&&(0,a.jsxs)("span",{className:"font-semibold text-t-strong",children:["\xa5",l.toLocaleString()]})]})]}),r.productUrl&&(0,a.jsxs)("a",{href:r.productUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 mt-2 text-kicker font-medium text-[var(--primary-400)] hover:text-[var(--primary-500)] dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:["View on Girafull",(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),r.alternatives&&r.alternatives.length>0&&(0,a.jsxs)("div",{className:"mt-2.5 pt-2 border-t border-divider",children:[(0,a.jsx)("p",{className:"text-kicker font-medium text-t-muted uppercase tracking-wider mb-1.5",children:"Also available"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1.5",children:r.alternatives.map((e,t)=>{let r=h[e.foilType];return(0,a.jsxs)("a",{href:e.productUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-2 py-1 rounded-lg bg-muted-surface/50 dark:bg-white/[0.04] hover:bg-muted-surface dark:hover:bg-white/[0.08] transition-colors",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-[10px] font-bold tracking-wide ".concat(r.base),children:e.foilType}),e.setCode&&(0,a.jsx)("span",{className:"text-[10px] text-t-muted",children:e.setCode}),null!==e.price&&(0,a.jsxs)("span",{className:"text-[11px] text-t-body font-medium",children:["\xa5",e.price.toLocaleString()]}),(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full inline-block ".concat(e.available?"bg-[var(--accent-success)]":"bg-[var(--accent-danger)]")})]},t)})})]})]})]})}let f={NF:{base:"bg-[#E4E6EB] text-[#586060] dark:bg-white/10 dark:text-white/60",glow:""},RF:{base:"bg-gradient-to-r from-rose-400 via-amber-400 to-sky-400 text-white",glow:"glow-rf"},CF:{base:"bg-gradient-to-r from-cyan-400 to-blue-500 text-white",glow:"glow-cf"},EARF:{base:"bg-gradient-to-r from-rose-400 via-amber-300 to-sky-400 text-white ring-2 ring-amber-300/60",glow:"glow-earf"},Marvel:{base:"bg-gradient-to-r from-violet-500 to-purple-600 text-white",glow:"glow-marvel"}},b={EN:"bg-blue-500/20 text-blue-400 border border-blue-500/30",JP:"bg-red-500/20 text-red-400 border border-red-500/30"};function j(e){let{results:t}=e,r=t.filter(e=>!e.error&&null!==e.price),s=t.filter(e=>e.error),l=r.reduce((e,t)=>e+t.price*t.quantity,0);return 0===t.length?null:(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsx)("h2",{className:"text-title-md font-semibold text-t-strong",children:"Summary"}),(0,a.jsx)("div",{className:"glass-card rounded-card bg-card shadow-card overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-[13px] text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-divider",children:[(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Card Name"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Foil"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Lang"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Card ID"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider text-right",children:"Qty"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider text-right",children:"Price"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider text-right",children:"Subtotal"})]})}),(0,a.jsx)("tbody",{children:r.map((e,t)=>{let r=f[e.foilType],s=function(e){let t=e.productTitle.toLowerCase(),r=e.productUrl.toLowerCase();return t.includes("【jp】")||r.includes("_langjp")?"JP":t.includes("【en】")||r.includes("_langen")?"EN":null}(e);return(0,a.jsxs)("tr",{className:"border-b border-divider last:border-b-0 hover:bg-white/[0.02] transition-colors",children:[(0,a.jsx)("td",{className:"px-5 py-3.5 text-t-strong font-medium",children:e.cardName}),(0,a.jsx)("td",{className:"px-5 py-3.5",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-bold tracking-wide ".concat(r.base," ").concat(r.glow),children:e.foilType})}),(0,a.jsx)("td",{className:"px-5 py-3.5",children:s&&(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-bold tracking-wide ".concat(b[s]),children:s})}),(0,a.jsx)("td",{className:"px-5 py-3.5 text-t-muted text-[12px]",children:e.setCode||"—"}),(0,a.jsx)("td",{className:"px-5 py-3.5 text-right text-t-body",children:e.quantity}),(0,a.jsx)("td",{className:"px-5 py-3.5 text-right text-t-body",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:["\xa5",e.price.toLocaleString(),(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full inline-block shrink-0 ".concat(e.available?"bg-[var(--accent-success)]":"bg-[var(--accent-danger)]")})]})}),(0,a.jsxs)("td",{className:"px-5 py-3.5 text-right text-t-strong font-semibold",children:["\xa5",(e.price*e.quantity).toLocaleString()]})]},t)})}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{className:"border-t border-divider dark:bg-white/[0.02] bg-muted-surface/30",children:[(0,a.jsx)("td",{colSpan:6,className:"px-5 py-4 text-right font-semibold text-t-strong text-title-sm",children:"Grand Total"}),(0,a.jsxs)("td",{className:"px-5 py-4 text-right font-bold text-metric-sm text-[var(--accent-success)]",children:["\xa5",l.toLocaleString()]})]})})]})})}),s.length>0&&(0,a.jsxs)("div",{className:"glass-card rounded-card bg-card shadow-card p-card-p space-y-2",children:[(0,a.jsxs)("h3",{className:"text-title-sm font-semibold text-[var(--accent-danger)]",children:["Not Found (",s.length,")"]}),s.map((e,t)=>(0,a.jsxs)("p",{className:"text-[13px] text-t-muted",children:[e.cardName," (",e.foilType,") — ",e.error]},t))]})]})}function v(e){return'"'.concat(e.replace(/"/g,'""'),'"')}function N(e){let{results:t,buyerName:r}=e;return 0===t.filter(e=>!e.error&&null!==e.price).length?null:(0,a.jsxs)("button",{onClick:()=>{!function(e,t){let r=new Date().toISOString().split("T")[0],a="".concat(t||"cardcrew","_").concat(r,".csv"),s=new Blob([e],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(s),n=document.createElement("a");n.href=l,n.download=a,n.click(),URL.revokeObjectURL(l)}(function(e,t){let r=new Date().toISOString().split("T")[0],a=[];a.push("Buyer: ".concat(t)),a.push("Date: ".concat(r)),a.push(""),a.push("Card Name,Foil Type,Language,Card ID,Quantity,Price per Unit (JPY),Subtotal (JPY)");let s=0;for(let t of e){if(t.error||null===t.price)continue;let e=t.price*t.quantity;s+=e;let r=v(t.cardName),l=function(e){let t=e.productTitle.toLowerCase(),r=e.productUrl.toLowerCase();return t.includes("【jp】")||r.includes("_langjp")?"JP":t.includes("【en】")||r.includes("_langen")?"EN":""}(t),n=t.setCode||"";a.push("".concat(r,",").concat(v(t.foilType),",").concat(v(l),",").concat(v(n),",").concat(t.quantity,",").concat(t.price,",").concat(e))}return a.push(""),a.push(",,,,,,Grand Total: \xa5".concat(s.toLocaleString())),"\uFEFF"+a.join("\n")}(t,r),r)},className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-400 hover:to-indigo-500 text-white text-[13px] font-semibold shadow-button hover:shadow-lg transition-all active:translate-y-px",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})}function w(e){let{enabled:t,onChange:r}=e;return(0,a.jsxs)("button",{type:"button",onClick:()=>r(!t),className:"inline-flex items-center gap-2 group","aria-pressed":t,children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-t-muted group-hover:text-t-body transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),(0,a.jsx)("span",{className:"text-[12px] font-medium text-t-muted select-none",children:"EN/JP"}),(0,a.jsx)("div",{className:"\n          relative w-9 h-5 rounded-full transition-colors duration-200\n          ".concat(t?"bg-[var(--accent-success)]":"bg-muted-surface","\n        "),children:(0,a.jsx)("div",{className:"\n            absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm\n            transition-transform duration-200\n            ".concat(t?"translate-x-[18px]":"translate-x-0.5","\n          ")})})]})}let y={NF:"bg-[#E4E6EB] text-[#586060] dark:bg-white/10 dark:text-white/60",RF:"bg-gradient-to-r from-rose-400 via-amber-400 to-sky-400 text-white",CF:"bg-gradient-to-r from-cyan-400 to-blue-500 text-white",EARF:"bg-gradient-to-r from-rose-400 via-amber-300 to-sky-400 text-white",Marvel:"bg-gradient-to-r from-violet-500 to-purple-600 text-white"};function k(e){let{lang:t,result:r,isSelected:s,isDisabled:l,onClick:n}=e,i=r&&!r.error;return(0,a.jsxs)("button",{type:"button",onClick:n,disabled:l,className:"\n        flex-1 rounded-card p-3 border-2 transition-all duration-200 text-left\n        ".concat(s?"border-[var(--accent-success)] bg-[var(--accent-success)]/5 shadow-md":i?"border-divider hover:border-t-muted bg-card":"border-divider bg-muted-surface opacity-50 cursor-not-allowed","\n      "),children:[(0,a.jsx)("span",{className:"\n          inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-bold tracking-wide mb-2\n          ".concat("EN"===t?"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300":"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300","\n        "),children:t}),i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-full aspect-[3/4] rounded-[8px] overflow-hidden bg-muted-surface dark:bg-white/5 mb-2",children:r.imageUrl?(0,a.jsx)("img",{src:r.imageUrl,alt:"".concat(r.cardName," (").concat(t,")"),className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-t-muted text-kicker",children:"No image"})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-1.5",children:[(0,a.jsx)("span",{className:"text-[15px] font-semibold text-t-strong",children:null!==r.price?"\xa5".concat(r.price.toLocaleString()):"—"}),(0,a.jsx)("span",{className:"text-kicker text-t-muted",children:"NM"})]}),r.available?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-kicker font-medium text-[var(--accent-success)]",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent-success)] inline-block"}),"In stock"]}):(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-kicker font-medium text-[var(--accent-danger)]",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent-danger)] inline-block"}),"Out of stock"]})]}),r.productUrl&&(0,a.jsxs)("a",{href:r.productUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"inline-flex items-center gap-1 mt-2 text-kicker font-medium text-[var(--primary-400)] hover:text-[var(--primary-500)] dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:["View on Girafull",(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),r.alternatives&&r.alternatives.length>0&&(0,a.jsxs)("div",{className:"mt-2 pt-2 border-t border-divider",children:[(0,a.jsx)("p",{className:"text-[10px] font-medium text-t-muted uppercase tracking-wider mb-1",children:"Also available"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:r.alternatives.map((e,t)=>(0,a.jsxs)("a",{href:e.productUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded-md bg-muted-surface/50 dark:bg-white/[0.04] hover:bg-muted-surface dark:hover:bg-white/[0.08] transition-colors",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-1 py-px rounded-full text-[9px] font-bold tracking-wide ".concat(y[e.foilType]),children:e.foilType}),e.setCode&&(0,a.jsx)("span",{className:"text-[9px] text-t-muted",children:e.setCode}),null!==e.price&&(0,a.jsxs)("span",{className:"text-[10px] text-t-body font-medium",children:["\xa5",e.price.toLocaleString()]}),(0,a.jsx)("span",{className:"w-1 h-1 rounded-full inline-block ".concat(e.available?"bg-[var(--accent-success)]":"bg-[var(--accent-danger)]")})]},t))})]})]}):(0,a.jsx)("div",{className:"w-full aspect-[3/4] rounded-[8px] bg-muted-surface dark:bg-white/5 flex items-center justify-center mb-2",children:(0,a.jsx)("span",{className:"text-[13px] text-t-muted",children:"Not Found"})}),s&&(0,a.jsxs)("div",{className:"mt-2 flex items-center justify-center gap-1 text-[12px] font-semibold text-[var(--accent-success)]",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Selected"]})]})}function C(e){let{cardName:t,foilType:r,quantity:s,en:l,jp:n,selected:i,onSelect:c}=e,d=y[r];return(0,a.jsxs)("div",{className:"glass-card shimmer-border rounded-card bg-card shadow-card p-card-p",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h3",{className:"text-title-sm font-semibold text-t-strong truncate",children:t}),(0,a.jsxs)("span",{className:"text-kicker text-t-muted",children:["Qty: ",s]})]}),(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-[11px] font-bold tracking-wide flex-shrink-0 ".concat(d),children:r})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)(k,{lang:"EN",result:l,isSelected:"EN"===i,isDisabled:!l||!!l.error||!l.available,onClick:()=>c("EN")}),(0,a.jsx)(k,{lang:"JP",result:n,isSelected:"JP"===i,isDisabled:!n||!!n.error||!n.available,onClick:()=>c("JP")})]})]})}function S(e){let{dualResults:t,selections:r,onSelect:s,onConfirm:l}=e,n=t.every((e,t)=>r.has(t)),i=r.size,c=t.length;return(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-title-md font-semibold text-t-strong",children:"Choose Language Version"}),(0,a.jsxs)("p",{className:"text-[13px] text-t-muted mt-0.5",children:[i,"/",c," selected — pick EN or JP for each card"]})]})}),(0,a.jsx)("div",{className:"grid gap-4 md:gap-[18px] lg:gap-grid-gap grid-cols-1 md:grid-cols-2",children:t.map((e,t)=>(0,a.jsx)(C,{cardName:e.cardName,foilType:e.foilType,quantity:e.quantity,en:e.en,jp:e.jp,selected:r.get(t),onSelect:e=>s(t,e)},t))}),(0,a.jsx)("div",{className:"flex justify-center pt-2",children:(0,a.jsxs)("button",{onClick:l,disabled:!n,className:"px-8 py-3 rounded-full bg-[var(--accent-success)] hover:brightness-110 disabled:bg-muted-surface disabled:text-t-muted text-white text-[14px] font-semibold shadow-button hover:shadow-lg transition-all active:translate-y-px disabled:shadow-none disabled:hover:brightness-100",children:["Confirm Selections (",i,"/",c,")"]})})]})}function L(e){let{activeTab:t,onChange:r}=e;return(0,a.jsx)("div",{className:"inline-flex rounded-full p-1 bg-muted-surface dark:bg-white/5",children:[{key:"text",label:"Text Input"},{key:"browser",label:"Card Browser"},{key:"deck",label:"Command Deck"}].map(e=>{let{key:s,label:l}=e;return(0,a.jsx)("button",{onClick:()=>r(s),className:"\n            px-4 py-1.5 rounded-full text-[13px] font-medium transition-all\n            ".concat(t===s?"bg-[var(--accent-success)] text-white shadow-sm":"text-t-muted hover:text-t-body","\n          "),children:l},s)})})}function E(e){let{imageIds:t,alt:r,className:l="",loading:n}=e,[i,c]=(0,s.useState)(0),[d,u]=(0,s.useState)(!1),x=(0,s.useCallback)(()=>{i+1<t.length?c(i+1):u(!0)},[i,t.length]);return d||0===t.length?(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-t-muted text-kicker text-center p-2",children:"No image"}):(0,a.jsx)("img",{src:o(t[i]),alt:r,className:l,loading:n,onError:x})}let F={1:"bg-red-500",2:"bg-yellow-400",3:"bg-blue-500"};function T(e){let{card:t,onClick:r}=e;return(0,a.jsxs)("button",{onClick:()=>r(t),className:"glass-card shimmer-border rounded-card bg-card shadow-card hover:shadow-card-hover hover:-translate-y-0.5 transition-all duration-200 text-left overflow-hidden group",children:[(0,a.jsxs)("div",{className:"aspect-[5/7] w-full overflow-hidden bg-muted-surface dark:bg-white/5 relative",children:[(0,a.jsx)(E,{imageIds:function(e){let t=[],r=new Set;for(let a of(e.defaultImage&&(t.push(e.defaultImage),r.add(e.defaultImage)),e.printings))a.image&&!r.has(a.image)&&(t.push(a.image),r.add(a.image));return t}(t),alt:t.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy"}),t.printings.length>1&&(0,a.jsxs)("span",{className:"absolute top-2 right-2 px-1.5 py-0.5 rounded-full bg-black/60 text-white text-[10px] font-bold backdrop-blur-sm",children:[t.printings.length," arts"]})]}),(0,a.jsxs)("div",{className:"p-3 space-y-1.5",children:[(0,a.jsxs)("div",{className:"flex items-start gap-1.5",children:[void 0!==t.pitch&&(0,a.jsx)("span",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0 mt-1 ".concat(F[t.pitch]||"bg-gray-400")}),(0,a.jsx)("h3",{className:"text-[13px] font-semibold text-t-strong leading-tight line-clamp-2",children:t.name})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[t.sets.slice(0,2).map(e=>(0,a.jsx)("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-medium bg-muted-surface dark:bg-white/8 text-t-muted",children:e},e)),t.sets.length>2&&(0,a.jsxs)("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-medium text-t-muted",children:["+",t.sets.length-2]})]})]})]})}var M=r(7650);let I=["NF","RF","CF","EARF","Marvel"],P={NF:{base:"bg-[#E4E6EB] text-[#586060] dark:bg-white/10 dark:text-white/60",glow:""},RF:{base:"bg-gradient-to-r from-rose-400 via-amber-400 to-sky-400 text-white",glow:"glow-rf"},CF:{base:"bg-gradient-to-r from-cyan-400 to-blue-500 text-white",glow:"glow-cf"},EARF:{base:"bg-gradient-to-r from-rose-400 via-amber-300 to-sky-400 text-white ring-2 ring-amber-300/60",glow:"glow-earf"},Marvel:{base:"bg-gradient-to-r from-violet-500 to-purple-600 text-white",glow:"glow-marvel"}};function R(e){let t=[e.set];return e.edition&&t.push(e.edition),e.foiling&&t.push(e.foiling),e.treatment&&t.push(e.treatment),t.join(" - ")}function U(e){let{pr:t,isSelected:r,onClick:l}=e,[n,i]=(0,s.useState)(!1);return n?null:(0,a.jsx)("button",{onClick:l,className:"\n        flex-shrink-0 w-[52px] aspect-[5/7] rounded-[6px] overflow-hidden border-2 transition-all\n        ".concat(r?"border-[var(--accent-success)] scale-105":"border-transparent opacity-60 hover:opacity-100","\n      "),title:R(t),children:(0,a.jsx)("img",{src:o(t.image),alt:R(t),className:"w-full h-full object-cover",loading:"lazy",onError:()=>i(!0)})})}function q(e){let{card:t,onAdd:r,onClose:l}=e,[n,i]=(0,s.useState)("NF"),[c,d]=(0,s.useState)(1),[o,u]=(0,s.useState)(0),x=t.printings[o],m=(0,s.useCallback)(()=>{let e=[],r=new Set;for(let a of((null==x?void 0:x.image)&&(e.push(x.image),r.add(x.image)),t.printings))a.image&&!r.has(a.image)&&(e.push(a.image),r.add(a.image));return t.defaultImage&&!r.has(t.defaultImage)&&e.push(t.defaultImage),e},[x,t.printings,t.defaultImage]);return(0,M.createPortal)((0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:l,children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),(0,a.jsxs)("div",{className:"relative glass-card rounded-card bg-card shadow-card-hover p-5 w-full max-w-md space-y-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-title-md font-semibold text-t-strong",children:t.name}),(0,a.jsxs)("p",{className:"text-kicker text-t-muted mt-0.5",children:[t.types.join(", ")," ",t.classes.length>0&&"NotClassed"!==t.classes[0]?"- ".concat(t.classes.join(", ")):""]})]}),(0,a.jsx)("div",{className:"w-full aspect-[5/7] max-w-[220px] mx-auto rounded-[10px] overflow-hidden bg-muted-surface dark:bg-white/5",children:(0,a.jsx)(E,{imageIds:m(),alt:"".concat(t.name).concat(x?" - ".concat(R(x)):""),className:"w-full h-full object-cover"},o)}),t.printings.length>1&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-kicker font-medium text-t-muted mb-2",children:["Printing (",o+1,"/",t.printings.length,")"]}),(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-1",children:t.printings.map((e,t)=>(0,a.jsx)(U,{pr:e,isSelected:t===o,onClick:()=>u(t)},"".concat(e.identifier,"-").concat(e.image)))}),(0,a.jsx)("p",{className:"text-[11px] text-t-muted mt-1.5 truncate",children:R(x)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-kicker font-medium text-t-muted mb-2",children:"Foil Type"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1.5",children:I.map(e=>{let t=P[e],r=n===e;return(0,a.jsx)("button",{onClick:()=>i(e),className:"\n                    px-3 py-1.5 rounded-full text-[11px] font-bold tracking-wide transition-all\n                    ".concat(r?"".concat(t.base," ").concat(t.glow," scale-105"):"bg-muted-surface dark:bg-white/5 text-t-muted hover:text-t-body","\n                  "),children:e},e)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-kicker font-medium text-t-muted mb-2",children:"Quantity"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>d(Math.max(1,c-1)),className:"w-8 h-8 rounded-full bg-muted-surface dark:bg-white/5 text-t-body hover:text-t-strong flex items-center justify-center transition-colors",children:"-"}),(0,a.jsx)("span",{className:"text-title-md font-semibold text-t-strong w-8 text-center",children:c}),(0,a.jsx)("button",{onClick:()=>d(c+1),className:"w-8 h-8 rounded-full bg-muted-surface dark:bg-white/5 text-t-body hover:text-t-strong flex items-center justify-center transition-colors",children:"+"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-1",children:[(0,a.jsx)("button",{onClick:()=>{r(t,n,c),l()},className:"flex-1 px-4 py-2.5 rounded-full bg-[var(--accent-success)] hover:brightness-110 text-white text-[13px] font-semibold shadow-button transition-all active:translate-y-px",children:"Add to List"}),(0,a.jsx)("button",{onClick:l,className:"px-4 py-2.5 rounded-full border border-divider text-t-muted hover:text-t-strong hover:border-t-muted text-[13px] font-medium transition-all",children:"Cancel"})]})]})]}),document.body)}function B(){return(0,a.jsx)("div",{className:"grid gap-4 md:gap-[18px] lg:gap-grid-gap grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:Array.from({length:8}).map((e,t)=>(0,a.jsxs)("div",{className:"glass-card rounded-card bg-card shadow-card overflow-hidden animate-pulse",children:[(0,a.jsx)("div",{className:"aspect-[5/7] bg-muted-surface dark:bg-white/5"}),(0,a.jsxs)("div",{className:"p-3 space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-muted-surface dark:bg-white/5 rounded w-3/4"}),(0,a.jsx)("div",{className:"h-3 bg-muted-surface dark:bg-white/5 rounded w-1/2"})]})]},t))})}function A(e){let{isLoading:t,loadError:r,searchQuery:s,onSearchQueryChange:l,searchResults:n,selectedCard:i,onSelectCard:c,onClearSelection:d,onAddToList:o}=e;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("svg",{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-t-muted pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,a.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"Search cards by name...",className:"w-full pl-10 pr-4 py-2.5 rounded-card bg-input-bg border border-input-border text-[13px] text-t-body placeholder:text-t-muted focus:outline-none focus:ring-2 focus:ring-[var(--input-focus-ring)] focus:border-transparent transition-all"})]}),t&&(0,a.jsx)(B,{}),r&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-[13px] text-[var(--accent-danger)]",children:r})}),!t&&!r&&s&&0===n.length&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsxs)("p",{className:"text-[13px] text-t-muted",children:['No cards found for "',s,'"']})}),!t&&!r&&!s&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-[13px] text-t-muted",children:"Type a card name to start searching"})}),n.length>0&&(0,a.jsx)("div",{className:"grid gap-4 md:gap-[18px] lg:gap-grid-gap grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:n.map(e=>(0,a.jsx)(T,{card:e,onClick:c},e.cardIdentifier))}),i&&(0,a.jsx)(q,{card:i,onAdd:o,onClose:d})]})}let D={NF:{base:"bg-[#E4E6EB] text-[#586060] dark:bg-white/10 dark:text-white/60",glow:""},RF:{base:"bg-gradient-to-r from-rose-400 via-amber-400 to-sky-400 text-white",glow:"glow-rf"},CF:{base:"bg-gradient-to-r from-cyan-400 to-blue-500 text-white",glow:"glow-cf"},EARF:{base:"bg-gradient-to-r from-rose-400 via-amber-300 to-sky-400 text-white ring-2 ring-amber-300/60",glow:"glow-earf"},Marvel:{base:"bg-gradient-to-r from-violet-500 to-purple-600 text-white",glow:"glow-marvel"}};function J(e){let{items:t,onRemove:r,onSearch:s,onClear:l,isSearching:n,dualLang:i,onDualLangChange:c}=e;return 0===t.length?(0,a.jsxs)("div",{className:"glass-card rounded-card bg-card shadow-card p-card-p",children:[(0,a.jsx)("p",{className:"text-[13px] text-t-muted text-center py-4",children:"No cards added yet. Search and click cards above to build your list."}),(0,a.jsx)("div",{className:"flex justify-end pt-2",children:(0,a.jsx)(w,{enabled:i,onChange:c})})]}):(0,a.jsxs)("div",{className:"glass-card shimmer-border rounded-card bg-card shadow-card p-card-p space-y-3",children:[(0,a.jsxs)("h3",{className:"text-title-sm font-semibold text-t-strong",children:["Build List (",t.length," ",1===t.length?"card":"cards",")"]}),(0,a.jsx)("div",{className:"space-y-1.5 max-h-[300px] overflow-y-auto",children:t.map((e,t)=>{let s=D[e.foilType];return(0,a.jsxs)("div",{className:"flex items-center gap-2 py-1.5 px-2 rounded-lg hover:bg-muted-surface dark:hover:bg-white/3 transition-colors",children:[(0,a.jsx)("span",{className:"text-[13px] text-t-body flex-1 truncate",children:x(e.card)}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-bold tracking-wide flex-shrink-0 ".concat(s.base," ").concat(s.glow),children:e.foilType}),(0,a.jsxs)("span",{className:"text-kicker text-t-muted flex-shrink-0 w-6 text-center",children:["x",e.quantity]}),(0,a.jsx)("button",{onClick:()=>r(t),className:"text-t-muted hover:text-[var(--accent-danger)] transition-colors flex-shrink-0 p-0.5","aria-label":"Remove ".concat(e.card.name),children:(0,a.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},"".concat(e.card.cardIdentifier,"-").concat(e.foilType,"-").concat(t))})}),(0,a.jsxs)("div",{className:"flex items-center gap-3 pt-1",children:[(0,a.jsx)("button",{onClick:s,disabled:n||0===t.length,className:"px-6 py-2.5 rounded-full bg-[var(--accent-success)] hover:brightness-110 disabled:bg-muted-surface disabled:text-t-muted text-white text-[13px] font-semibold shadow-button hover:shadow-lg transition-all active:translate-y-px disabled:shadow-none disabled:hover:brightness-100",children:n?"Searching...":"Search Prices"}),(0,a.jsx)("button",{onClick:l,className:"px-4 py-2.5 rounded-full border border-divider text-t-muted hover:text-t-strong hover:border-t-muted text-[13px] font-medium transition-all",children:"Clear All"}),(0,a.jsx)("div",{className:"ml-auto",children:(0,a.jsx)(w,{enabled:i,onChange:c})})]})]})}let W=["NF","RF","CF","EARF","Marvel"],Q=["EN","JP",""];function _(e){let t=e.trim();return t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1).replace(/""/g,'"'):t}function O(e){let{onFiles:t}=e,[r,l]=(0,s.useState)(!1),n=(0,s.useRef)(null),i=(0,s.useCallback)(e=>{e.preventDefault(),l(!0)},[]),c=(0,s.useCallback)(e=>{e.preventDefault(),l(!1)},[]),d=(0,s.useCallback)(e=>{e.preventDefault(),l(!1),e.dataTransfer.files.length>0&&t(e.dataTransfer.files)},[t]);return(0,a.jsxs)("div",{onClick:()=>{var e;null==(e=n.current)||e.click()},onDragOver:i,onDragLeave:c,onDrop:d,className:"\n        glass-card rounded-card p-8 cursor-pointer transition-all\n        border-2 border-dashed\n        ".concat(r?"border-[var(--accent-success)] bg-[var(--accent-success)]/5":"border-divider hover:border-t-muted","\n      "),children:[(0,a.jsx)("input",{ref:n,type:"file",accept:".csv",multiple:!0,className:"hidden",onChange:e=>{e.target.files&&e.target.files.length>0&&(t(e.target.files),e.target.value="")}}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center",children:[(0,a.jsx)("svg",{className:"w-8 h-8 text-t-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,a.jsx)("p",{className:"text-[13px] text-t-body font-medium",children:"Drop CardCrew CSV files here or click to browse"}),(0,a.jsx)("p",{className:"text-[11px] text-t-muted",children:"Import multiple buyer exports to aggregate"})]})]})}function z(e){let{stats:t}=e,r=[{label:"Buyers",value:t.totalBuyers.toString()},{label:"Unique Cards",value:t.totalUniqueCards.toString()},{label:"Total Qty",value:t.totalCards.toLocaleString()},{label:"Grand Total",value:"\xa5".concat(t.grandTotal.toLocaleString())}];return(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:r.map(e=>{let{label:t,value:r}=e;return(0,a.jsxs)("div",{className:"glass-card rounded-card bg-card shadow-card p-4 text-center",children:[(0,a.jsx)("p",{className:"text-kicker font-medium text-t-muted uppercase tracking-wider mb-1",children:t}),(0,a.jsx)("p",{className:"text-title-md font-bold text-t-strong",children:r})]},t)})})}let G={NF:{base:"bg-[#E4E6EB] text-[#586060] dark:bg-white/10 dark:text-white/60",glow:""},RF:{base:"bg-gradient-to-r from-rose-400 via-amber-400 to-sky-400 text-white",glow:"glow-rf"},CF:{base:"bg-gradient-to-r from-cyan-400 to-blue-500 text-white",glow:"glow-cf"},EARF:{base:"bg-gradient-to-r from-rose-400 via-amber-300 to-sky-400 text-white ring-2 ring-amber-300/60",glow:"glow-earf"},Marvel:{base:"bg-gradient-to-r from-violet-500 to-purple-600 text-white",glow:"glow-marvel"}},V={EN:"bg-blue-500/20 text-blue-400 border border-blue-500/30",JP:"bg-red-500/20 text-red-400 border border-red-500/30"};function H(e){let{buyer:t,isExpanded:r,onToggle:s,onRemove:l}=e;return(0,a.jsxs)("div",{className:"glass-card rounded-card bg-card shadow-card overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-5 py-3.5 cursor-pointer hover:bg-white/[0.02] transition-colors",onClick:s,children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-t-muted transition-transform ".concat(r?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,a.jsx)("span",{className:"text-[14px] font-semibold text-t-strong flex-1",children:t.buyerName}),(0,a.jsx)("span",{className:"text-[12px] text-t-muted",children:t.date}),(0,a.jsxs)("span",{className:"text-[12px] text-t-muted",children:[t.cards.length," cards"]}),(0,a.jsxs)("span",{className:"text-[13px] font-semibold text-[var(--accent-success)]",children:["\xa5",t.grandTotal.toLocaleString()]}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),l()},className:"ml-2 p-1 rounded-full hover:bg-red-500/10 text-t-muted hover:text-red-400 transition-colors","aria-label":"Remove ".concat(t.buyerName),children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r&&(0,a.jsx)("div",{className:"border-t border-divider overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-[13px] text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-divider",children:[(0,a.jsx)("th",{className:"px-5 py-3 text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Card Name"}),(0,a.jsx)("th",{className:"px-5 py-3 text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Foil"}),(0,a.jsx)("th",{className:"px-5 py-3 text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Lang"}),(0,a.jsx)("th",{className:"px-5 py-3 text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Card ID"}),(0,a.jsx)("th",{className:"px-5 py-3 text-kicker font-medium text-t-muted uppercase tracking-wider text-right",children:"Qty"}),(0,a.jsx)("th",{className:"px-5 py-3 text-kicker font-medium text-t-muted uppercase tracking-wider text-right",children:"Price"}),(0,a.jsx)("th",{className:"px-5 py-3 text-kicker font-medium text-t-muted uppercase tracking-wider text-right",children:"Subtotal"})]})}),(0,a.jsx)("tbody",{children:t.cards.map((e,t)=>{let r=G[e.foilType];return(0,a.jsxs)("tr",{className:"border-b border-divider last:border-b-0 hover:bg-white/[0.02] transition-colors",children:[(0,a.jsx)("td",{className:"px-5 py-3 text-t-strong font-medium",children:e.cardName}),(0,a.jsx)("td",{className:"px-5 py-3",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-bold tracking-wide ".concat(r.base," ").concat(r.glow),children:e.foilType})}),(0,a.jsx)("td",{className:"px-5 py-3",children:e.language&&(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-bold tracking-wide ".concat(V[e.language]),children:e.language})}),(0,a.jsx)("td",{className:"px-5 py-3 text-t-muted text-[12px]",children:e.cardId||"—"}),(0,a.jsx)("td",{className:"px-5 py-3 text-right text-t-body",children:e.quantity}),(0,a.jsxs)("td",{className:"px-5 py-3 text-right text-t-body",children:["\xa5",e.pricePerUnit.toLocaleString()]}),(0,a.jsxs)("td",{className:"px-5 py-3 text-right text-t-strong font-semibold",children:["\xa5",e.subtotal.toLocaleString()]})]},t)})})]})})]})}let Y={NF:{base:"bg-[#E4E6EB] text-[#586060] dark:bg-white/10 dark:text-white/60",glow:""},RF:{base:"bg-gradient-to-r from-rose-400 via-amber-400 to-sky-400 text-white",glow:"glow-rf"},CF:{base:"bg-gradient-to-r from-cyan-400 to-blue-500 text-white",glow:"glow-cf"},EARF:{base:"bg-gradient-to-r from-rose-400 via-amber-300 to-sky-400 text-white ring-2 ring-amber-300/60",glow:"glow-earf"},Marvel:{base:"bg-gradient-to-r from-violet-500 to-purple-600 text-white",glow:"glow-marvel"}},$={EN:"bg-blue-500/20 text-blue-400 border border-blue-500/30",JP:"bg-red-500/20 text-red-400 border border-red-500/30"};function K(e){let{cards:t}=e,r=t.reduce((e,t)=>e+t.totalCost,0);return 0===t.length?null:(0,a.jsx)("div",{className:"glass-card rounded-card bg-card shadow-card overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-[13px] text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-divider",children:[(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Card Name"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Foil"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Lang"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Card ID"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider text-right",children:"Total Qty"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider text-right",children:"Unit Price"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider text-right",children:"Total Cost"}),(0,a.jsx)("th",{className:"px-5 py-3.5 text-kicker font-medium text-t-muted uppercase tracking-wider",children:"Buyers"})]})}),(0,a.jsx)("tbody",{children:t.map((e,t)=>{let r=Y[e.foilType];return(0,a.jsxs)("tr",{className:"border-b border-divider last:border-b-0 hover:bg-white/[0.02] transition-colors",children:[(0,a.jsx)("td",{className:"px-5 py-3.5 text-t-strong font-medium",children:e.cardName}),(0,a.jsx)("td",{className:"px-5 py-3.5",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-bold tracking-wide ".concat(r.base," ").concat(r.glow),children:e.foilType})}),(0,a.jsx)("td",{className:"px-5 py-3.5",children:e.language&&(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-bold tracking-wide ".concat($[e.language]),children:e.language})}),(0,a.jsx)("td",{className:"px-5 py-3.5 text-t-muted text-[12px]",children:e.cardId||"—"}),(0,a.jsx)("td",{className:"px-5 py-3.5 text-right text-t-body",children:e.totalQuantity}),(0,a.jsxs)("td",{className:"px-5 py-3.5 text-right text-t-body",children:["\xa5",e.pricePerUnit.toLocaleString()]}),(0,a.jsxs)("td",{className:"px-5 py-3.5 text-right text-t-strong font-semibold",children:["\xa5",e.totalCost.toLocaleString()]}),(0,a.jsx)("td",{className:"px-5 py-3.5 text-t-muted text-[12px]",children:e.buyers.map(e=>"".concat(e.buyerName," (").concat(e.quantity,")")).join(", ")})]},t)})}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{className:"border-t border-divider dark:bg-white/[0.02] bg-muted-surface/30",children:[(0,a.jsx)("td",{colSpan:6,className:"px-5 py-4 text-right font-semibold text-t-strong text-title-sm",children:"Grand Total"}),(0,a.jsxs)("td",{className:"px-5 py-4 text-right font-bold text-metric-sm text-[var(--accent-success)]",children:["\xa5",r.toLocaleString()]}),(0,a.jsx)("td",{})]})})]})})})}let X=[{key:"buyers",label:"By Buyer"},{key:"aggregated",label:"Purchase Order"}];function Z(){let{buyers:e,importErrors:t,activeView:r,setActiveView:l,expandedBuyerId:n,toggleExpanded:i,aggregated:c,stats:d,importFiles:o,removeBuyer:u,clearAll:x,dismissError:m}=function(){let[e,t]=(0,s.useState)([]),[r,a]=(0,s.useState)([]),[l,n]=(0,s.useState)("buyers"),[i,c]=(0,s.useState)(null),d=(0,s.useMemo)(()=>(function(e){let t=new Map;for(let r of e)for(let e of r.cards){let a="".concat(e.cardName,"|").concat(e.foilType,"|").concat(e.language),s=t.get(a);s?(s.totalQuantity+=e.quantity,s.pricePerUnit=Math.max(s.pricePerUnit,e.pricePerUnit),s.totalCost=s.totalQuantity*s.pricePerUnit,s.buyers.push({buyerName:r.buyerName,quantity:e.quantity})):t.set(a,{cardName:e.cardName,foilType:e.foilType,language:e.language,cardId:e.cardId,totalQuantity:e.quantity,pricePerUnit:e.pricePerUnit,totalCost:e.quantity*e.pricePerUnit,buyers:[{buyerName:r.buyerName,quantity:e.quantity}]})}return Array.from(t.values()).sort((e,t)=>e.cardName.localeCompare(t.cardName))})(e),[e]),o=(0,s.useMemo)(()=>(function(e){let t=new Set,r=0,a=0;for(let s of e)for(let e of(a+=s.grandTotal,s.cards))r+=e.quantity,t.add("".concat(e.cardName,"|").concat(e.foilType,"|").concat(e.language));return{totalBuyers:e.length,totalCards:r,totalUniqueCards:t.size,grandTotal:a}})(e),[e]),u=(0,s.useCallback)(async e=>{let r=[],s=[];for(let t of Array.from(e)){let{buyer:e,error:a}=function(e,t){let r=e.replace(/^\uFEFF/,"").replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n");if(r.length<5)return{buyer:null,error:{fileName:t,message:"File too short to be a valid CardCrew CSV"}};let a=r[0].match(/^Buyer:\s*(.+)$/);if(!a)return{buyer:null,error:{fileName:t,message:'Missing "Buyer: <name>" on line 1'}};let s=a[1].trim(),l=r[1].match(/^Date:\s*(.+)$/);if(!l)return{buyer:null,error:{fileName:t,message:'Missing "Date: <date>" on line 2'}};let n=l[1].trim(),i=2;for(;i<r.length&&""===r[i].trim();)i++;if(i>=r.length)return{buyer:null,error:{fileName:t,message:"Missing header row"}};let c=i+1,d=[],o=0;for(let e=c;e<r.length;e++){let t=r[e].trim();if(""===t)continue;if(t.includes("Grand Total")){let e=t.match(/Grand Total:\s*¥?([\d,]+)/);e&&(o=parseInt(e[1].replace(/,/g,""),10));break}let a=function(e){let t=[],r="",a=!1;for(let s=0;s<e.length;s++){let l=e[s];a?'"'===l?s+1<e.length&&'"'===e[s+1]?(r+='"',s++):a=!1:r+=l:'"'===l?a=!0:","===l?(t.push(r),r=""):r+=l}return t.push(r),t}(t);if(a.length<7)continue;let s=_(a[0]),l=_(a[1]),n=_(a[2]),i=_(a[3]),c=parseInt(a[4].trim(),10),u=parseInt(a[5].trim(),10),x=parseInt(a[6].trim(),10);if(!s||isNaN(c)||isNaN(u))continue;let m=W.includes(l)?l:"NF",p=Q.includes(n)?n:"";d.push({cardName:s,foilType:m,language:p,cardId:i,quantity:c,pricePerUnit:u,subtotal:isNaN(x)?u*c:x})}return 0===d.length?{buyer:null,error:{fileName:t,message:"No card data found in file"}}:(0===o&&(o=d.reduce((e,t)=>e+t.subtotal,0)),{buyer:{id:crypto.randomUUID(),buyerName:s,date:n,fileName:t,cards:d,grandTotal:o},error:null})}(await t.text(),t.name);a?r.push(a):e&&s.push(e)}t(e=>{let t=[...e];for(let e of s){let r=t.findIndex(t=>t.buyerName===e.buyerName);r>=0?t[r]=e:t.push(e)}return t}),r.length>0&&a(e=>[...e,...r])},[]),x=(0,s.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e)),c(t=>t===e?null:t)},[]),m=(0,s.useCallback)(()=>{t([]),a([]),c(null)},[]),p=(0,s.useCallback)(e=>{a(t=>t.filter((t,r)=>r!==e))},[]);return{buyers:e,importErrors:r,activeView:l,setActiveView:n,expandedBuyerId:i,toggleExpanded:(0,s.useCallback)(e=>{c(t=>t===e?null:e)},[]),aggregated:d,stats:o,importFiles:u,removeBuyer:x,clearAll:m,dismissError:p}}();return(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsx)(O,{onFiles:o}),t.length>0&&(0,a.jsx)("div",{className:"space-y-2",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"glass-card rounded-card bg-card shadow-card p-4 flex items-center gap-3 border border-red-500/20",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-red-400 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-[13px] text-t-strong font-medium truncate",children:e.fileName}),(0,a.jsx)("p",{className:"text-[12px] text-t-muted",children:e.message})]}),(0,a.jsx)("button",{onClick:()=>m(t),className:"p-1 rounded-full hover:bg-white/5 text-t-muted hover:text-t-body transition-colors",children:(0,a.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))}),e.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z,{stats:d}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"inline-flex rounded-full p-1 bg-muted-surface dark:bg-white/5",children:X.map(e=>{let{key:t,label:s}=e;return(0,a.jsx)("button",{onClick:()=>l(t),className:"\n                    px-4 py-1.5 rounded-full text-[13px] font-medium transition-all\n                    ".concat(r===t?"bg-[var(--accent-success)] text-white shadow-sm":"text-t-muted hover:text-t-body","\n                  "),children:s},t)})}),(0,a.jsx)("button",{onClick:x,className:"px-4 py-2 rounded-full border border-divider text-t-muted hover:text-red-400 hover:border-red-400/30 text-[13px] font-medium transition-all",children:"Clear All"})]}),"buyers"===r&&(0,a.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,a.jsx)(H,{buyer:e,isExpanded:n===e.id,onToggle:()=>i(e.id),onRemove:()=>u(e.id)},e.id))}),"aggregated"===r&&(0,a.jsx)(K,{cards:c})]})]})}function ee(){let{input:e,setInput:t,buyerName:r,setBuyerName:c,results:o,parseErrors:u,isSearching:h,progress:f,search:b,searchFromList:v,clearResults:y,dualLang:k,setDualLang:C,dualResults:E,selections:F,selectLanguage:T,confirmSelections:M,isPickerMode:I}=function(){let[e,t]=(0,s.useState)(""),[r,a]=(0,s.useState)(""),[c,d]=(0,s.useState)([]),[o,u]=(0,s.useState)([]),[x,m]=(0,s.useState)(!1),[p,h]=(0,s.useState)({current:0,total:0}),[g,f]=(0,s.useState)(!1),[b,j]=(0,s.useState)([]),[v,N]=(0,s.useState)(new Map),[w,y]=(0,s.useState)(!1),[k,C]=(0,s.useState)([]);(0,s.useEffect)(()=>{try{let e=localStorage.getItem("cardcrew-dual-lang");"true"===e&&f(!0)}catch(e){}},[]);let S=(0,s.useCallback)(e=>{f(e);try{localStorage.setItem("cardcrew-dual-lang",String(e))}catch(e){}},[]),L=g&&b.length>0&&!w,E=(0,s.useCallback)((e,t)=>{N(r=>{let a=new Map(r);return a.set(e,t),a})},[]),F=(0,s.useCallback)(()=>{let e=b.map((e,t)=>{let r="JP"===v.get(t)?e.jp:e.en;return r||{cardName:e.cardName,foilType:e.foilType,quantity:e.quantity,productTitle:"",price:null,imageUrl:null,available:!1,productUrl:"",setCode:null,error:"No version selected or found"}});t(e=>{let t=e;return b.forEach((e,r)=>{let a=v.get(r)||"EN",s=k[r];if(s){let e=n(a,s.cardName,s.foilType,s.quantity);t=i(t,s.rawLine,e)}}),t}),d(e),y(!0)},[b,v,k]),T=(0,s.useCallback)(async()=>{let r=function(e){let t=[],r=[];for(let a of e.split("\n").map(e=>e.trim()).filter(e=>e.length>0)){let e,s=a,n=s.match(/^\[(EN|JP)\]\s*/i);n&&(e=n[1].toUpperCase(),s=s.slice(n[0].length));let i=s.split(/\s+/);if(i.length<2){r.push({line:a,message:"Need at least a card name and foil type"});continue}let c=1,d=i.length-1,o=i[d];if(/^\d+$/.test(o)&&(c=parseInt(o,10),d--),d<1){r.push({line:a,message:"Need at least a card name and foil type"});continue}let u=i[d].toUpperCase(),x=l.find(e=>e===u);if(!x){r.push({line:a,message:'Invalid foil type "'.concat(i[d],'". Use: NF, RF, CF, EARF, Marvel')});continue}let m=i.slice(0,d).join(" ");if(!m){r.push({line:a,message:"Card name is empty"});continue}t.push({cardName:m,foilType:x,quantity:c,rawLine:a,lang:e})}return{cards:t,errors:r}}(e);if(u(r.errors),0!==r.cards.length){C(r.cards),m(!0),d([]),j([]),N(new Map),y(!1),h({current:0,total:r.cards.length});try{let e=await fetch("/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cards:r.cards,dualLang:g})});if(!e.ok){let t=await e.json();throw Error(t.error||"Search failed")}let a=await e.json();if(g){let e=a.results;j(e);let t=new Map;e.forEach((e,r)=>{let a=e.en&&!e.en.error,s=e.jp&&!e.jp.error,l=a&&e.en.available,n=s&&e.jp.available;l&&!n?t.set(r,"EN"):n&&!l?t.set(r,"JP"):l||n||(a?t.set(r,"EN"):s&&t.set(r,"JP"))}),N(t)}else d(a.results),t(e=>{let t=e;return r.cards.forEach(e=>{if(!e.lang){let r=n("EN",e.cardName,e.foilType,e.quantity);t=i(t,e.rawLine,r)}}),t});h({current:r.cards.length,total:r.cards.length})}catch(e){console.error("Search error:",e),d(r.cards.map(t=>({cardName:t.cardName,foilType:t.foilType,quantity:t.quantity,productTitle:"",price:null,imageUrl:null,available:!1,productUrl:"",setCode:null,error:e instanceof Error?e.message:"Search failed"})))}finally{m(!1)}}},[e,g]);return{input:e,setInput:t,buyerName:r,setBuyerName:a,results:c,parseErrors:o,isSearching:x,progress:p,search:T,searchFromList:(0,s.useCallback)(async e=>{if(0!==e.length){C(e),u([]),m(!0),d([]),j([]),N(new Map),y(!1),h({current:0,total:e.length});try{let t=await fetch("/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cards:e,dualLang:g})});if(!t.ok){let e=await t.json();throw Error(e.error||"Search failed")}let r=await t.json();if(g){let e=r.results;j(e);let t=new Map;e.forEach((e,r)=>{let a=e.en&&!e.en.error,s=e.jp&&!e.jp.error,l=a&&e.en.available,n=s&&e.jp.available;l&&!n?t.set(r,"EN"):n&&!l?t.set(r,"JP"):l||n||(a?t.set(r,"EN"):s&&t.set(r,"JP"))}),N(t)}else d(r.results);h({current:e.length,total:e.length})}catch(t){console.error("Search error:",t),d(e.map(e=>({cardName:e.cardName,foilType:e.foilType,quantity:e.quantity,productTitle:"",price:null,imageUrl:null,available:!1,productUrl:"",setCode:null,error:t instanceof Error?t.message:"Search failed"})))}finally{m(!1)}}},[g]),clearResults:(0,s.useCallback)(()=>{d([]),j([]),N(new Map),y(!1),u([]),h({current:0,total:0}),C([])},[]),dualLang:g,setDualLang:S,dualResults:b,selections:v,selectLanguage:E,confirmSelections:F,isPickerMode:L}}(),{theme:P,toggle:R,mounted:U}=function(){let[e,t]=(0,s.useState)("dark"),[r,a]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=localStorage.getItem("cardcrew-theme")||"dark";t(e),document.documentElement.classList.toggle("dark","dark"===e),a(!0)},[]);let l=(0,s.useCallback)(e=>{t(e),localStorage.setItem("cardcrew-theme",e),document.documentElement.classList.toggle("dark","dark"===e)},[]),n=(0,s.useCallback)(()=>{l("dark"===e?"light":"dark")},[e,l]);return{theme:e,toggle:n,mounted:r}}(),[q,B]=(0,s.useState)("text"),D=function(){let[e,t]=(0,s.useState)([]),r=(0,s.useCallback)((e,r,a)=>{t(t=>{let s=t.findIndex(t=>t.card.cardIdentifier===e.cardIdentifier&&t.foilType===r);if(s>=0){let e=[...t];return e[s]={...e[s],quantity:e[s].quantity+a},e}return[...t,{card:e,foilType:r,quantity:a}]})},[]),a=(0,s.useCallback)(e=>{t(t=>t.filter((t,r)=>r!==e))},[]),l=(0,s.useCallback)((e,r)=>{t(t=>{let a=[...t];return a[e]={...a[e],...r},a})},[]),n=(0,s.useCallback)(()=>{t([])},[]),i=(0,s.useCallback)(()=>e.map(e=>{let t=x(e.card);return{cardName:t,foilType:e.foilType,quantity:e.quantity,rawLine:"".concat(t," ").concat(e.foilType," ").concat(e.quantity)}}),[e]);return{items:e,addItem:r,removeItem:a,updateItem:l,clearList:n,toParsedCards:i}}(),W=function(){let[e,t]=(0,s.useState)([]),[r,a]=(0,s.useState)(!1),[l,n]=(0,s.useState)(""),[i,c]=(0,s.useState)([]),[o,u]=(0,s.useState)(null),[x,m]=(0,s.useState)(null),p=(0,s.useRef)(!1),h=(0,s.useRef)(void 0),g=(0,s.useCallback)(async()=>{if(!p.current){p.current=!0,a(!0),m(null);try{let e=await d();t(e)}catch(e){m("Failed to load card database")}finally{a(!1)}}},[]);return(0,s.useEffect)(()=>0===e.length?void c([]):(h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{c(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,a=t.toLowerCase().trim();if(!a)return[];let s=[],l=[];for(let t of e){let e=t.name.toLowerCase();if(e.startsWith(a)?s.push(t):e.includes(a)&&l.push(t),s.length+l.length>=r)break}return[...s,...l].slice(0,r)}(e,l))},300),()=>{h.current&&clearTimeout(h.current)}),[l,e]),{isLoading:r,loadError:x,searchQuery:l,setSearchQuery:n,searchResults:i,selectedCard:o,selectCard:(0,s.useCallback)(e=>{u(e)},[]),clearSelection:(0,s.useCallback)(()=>{u(null)},[]),load:g}}();return(0,a.jsx)("div",{className:"min-h-screen bg-page p-4 sm:p-6 md:p-8 lg:p-10",children:(0,a.jsxs)("div",{className:"max-w-[1120px] mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6 md:mb-8 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-[28px] font-bold text-t-strong tracking-tight",children:"CardCrew"}),(0,a.jsx)("p",{className:"text-[13px] text-t-muted mt-1",children:"Search Flesh and Blood cards on Girafull"})]}),U&&(0,a.jsx)("button",{onClick:R,className:"glass-card p-2.5 rounded-full shadow-card hover:shadow-card-hover transition-all","aria-label":"Toggle theme",children:"dark"===P?(0,a.jsx)("svg",{className:"w-5 h-5 text-amber-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):(0,a.jsx)("svg",{className:"w-5 h-5 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})]}),(0,a.jsxs)("div",{className:"glass-panel rounded-panel bg-panel p-4 sm:p-5 md:p-6 lg:p-7",children:[(0,a.jsx)("div",{className:"mb-5",children:(0,a.jsx)(L,{activeTab:q,onChange:e=>{B(e),"browser"===e&&W.load()}})}),"deck"!==q&&(0,a.jsx)("div",{className:"glass-card shimmer-border rounded-card bg-card shadow-card p-card-p mb-5",children:(0,a.jsx)(p,{value:r,onChange:c})}),"text"===q&&(0,a.jsxs)("div",{className:"glass-card shimmer-border rounded-card bg-card shadow-card p-card-p space-y-4 mb-5",children:[(0,a.jsx)(m,{value:e,onChange:t,errors:u,disabled:h}),(0,a.jsxs)("div",{className:"flex items-center gap-3 pt-1",children:[(0,a.jsx)("button",{onClick:b,disabled:h||!e.trim(),className:"px-6 py-2.5 rounded-full bg-[var(--accent-success)] hover:brightness-110 disabled:bg-muted-surface disabled:text-t-muted text-white text-[13px] font-semibold shadow-button hover:shadow-lg transition-all active:translate-y-px disabled:shadow-none disabled:hover:brightness-100",children:h?"Searching...":"Search"}),(o.length>0||E.length>0)&&(0,a.jsx)("button",{onClick:y,className:"px-4 py-2.5 rounded-full border border-divider text-t-muted hover:text-t-strong hover:border-t-muted text-[13px] font-medium transition-all",children:"Clear"}),(0,a.jsx)("div",{className:"ml-auto",children:(0,a.jsx)(w,{enabled:k,onChange:C})})]})]}),"browser"===q&&(0,a.jsxs)("div",{className:"space-y-5 mb-5",children:[(0,a.jsx)("div",{className:"glass-card shimmer-border rounded-card bg-card shadow-card p-card-p",children:(0,a.jsx)(A,{isLoading:W.isLoading,loadError:W.loadError,searchQuery:W.searchQuery,onSearchQueryChange:W.setSearchQuery,searchResults:W.searchResults,selectedCard:W.selectedCard,onSelectCard:W.selectCard,onClearSelection:W.clearSelection,onAddToList:(r,a,s)=>{D.addItem(r,a,s);let l=x(r),n="".concat(l," ").concat(a," ").concat(s);t(e?"".concat(e,"\n").concat(n):n)}})}),(0,a.jsx)(J,{items:D.items,onRemove:r=>{let a=D.items[r];if(a){let r=x(a.card),s="".concat(r," ").concat(a.foilType," ").concat(a.quantity),l=e.split("\n"),n=l.findIndex(e=>e.trim()===s);n>=0&&(l.splice(n,1),t(l.join("\n")))}D.removeItem(r)},onSearch:()=>{v(D.toParsedCards())},onClear:()=>{let r=new Set(D.items.map(e=>{let t=x(e.card);return"".concat(t," ").concat(e.foilType," ").concat(e.quantity)}));t(e.split("\n").filter(e=>!r.has(e.trim())).join("\n")),D.clearList()},isSearching:h,dualLang:k,onDualLangChange:C})]}),"deck"===q&&(0,a.jsx)("div",{className:"mb-5",children:(0,a.jsx)(Z,{})}),h&&(0,a.jsxs)("div",{className:"glass-card rounded-card bg-card shadow-card p-card-p mb-5 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-[var(--primary-400)] border-t-transparent rounded-full animate-spin"}),(0,a.jsxs)("span",{className:"text-[13px] text-t-body",children:["Searching cards... ",f.current,"/",f.total]})]}),(0,a.jsx)("div",{className:"w-full bg-muted-surface rounded-full h-1.5 overflow-hidden",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 h-1.5 rounded-full transition-all duration-300",style:{width:f.total>0?"".concat(f.current/f.total*100,"%"):"0%"}})})]}),I&&(0,a.jsx)(S,{dualResults:E,selections:F,onSelect:T,onConfirm:M}),!I&&o.length>0&&(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-title-md font-semibold text-t-strong",children:"Results"}),(0,a.jsx)("div",{className:"grid gap-4 md:gap-[18px] lg:gap-grid-gap grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:o.map((e,t)=>(0,a.jsx)(g,{result:e},t))})]}),(0,a.jsx)(j,{results:o}),(0,a.jsx)("div",{className:"flex justify-end pt-1",children:(0,a.jsx)(N,{results:o,buyerName:r})})]})]})]})})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=4359)),_N_E=e.O()}]);